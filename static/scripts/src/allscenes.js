// Generated by CoffeeScript 1.7.1
(function() {
  $(document).on('ready', function() {
    var deletePlace, editPlace, list;
    list = new PlacingLit.Views.Allscenes();
    editPlace = function() {
      var $form, form_data, key;
      $form = $('#editform');
      key = window.location.search.split('=')[1];
      form_data = {
        title: $form.find('#title').val(),
        author: $form.find('#author').val(),
        scenelocation: $form.find('#scenelocation').val(),
        scenedescription: $form.find('#scenedescription').val(),
        notes: $form.find('#notes').val(),
        image_url: $form.find('#image_url').val(),
        actors: $form.find('#actors').val(),
        scenetime: $form.find('#scenetime').val(),
        symbols: $form.find('#symbols').val(),
        ug_isbn: $form.find('#ug_isbn').val()
      };
      console.log(form_data);
      return $.ajax({
        url: '/admin/edit?key=' + key,
        type: 'POST',
        data: form_data,
        success: (function(_this) {
          return function(data, status, xhr) {
            $('#editplacebutton').off('click');
            return $('#editplacebutton').text(data);
          };
        })(this)
      });
    };
    deletePlace = function() {
      var key;
      key = window.location.search.split('=')[1];
      return $.ajax({
        url: '/admin/edit?key=' + key,
        type: 'DELETE',
        success: (function(_this) {
          return function(data, status, xhr) {
            $('#deleteplacebutton').off('click');
            $('#deleteplacebutton').text(data);
            return $('#editplacebutton').remove();
          };
        })(this)
      });
    };
    $('#editplacebutton').on('click', function(event) {
      return editPlace();
    });
    return $('#deleteplacebutton').on('click', function(event) {
      return deletePlace();
    });
  });

}).call(this);
