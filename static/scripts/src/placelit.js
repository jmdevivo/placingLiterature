// Generated by CoffeeScript 1.7.1
(function() {
  $(document).on('ready', function() {
    var alertMessage, author, author_path, mapCanvas, path;
    if (location.search === '?modal=1') {
      $('#mapmodal').modal();
    }
    if (window.SCENES) {
      path = window.location.pathname;
      if ((window.SCENES.length === 0) && (path.indexOf('author') !== -1)) {
        author_path = '/map/filter/author/';
        author = decodeURIComponent(path.replace(author_path, ''));
        mapCanvas = new PlacingLit.Views.MapCanvasView;
        alertMessage = 'Whoa! No places found for ' + author + '. ';
        alertMessage += 'But that\'s ok!. Be the first to map this author. ';
        alertMessage += 'Click the map to add a book and author.';
        alert(alertMessage);
      } else {
        if (path.indexOf('collections') !== -1) {
          $('#querymodal').modal();
        }
        if (path.indexOf('author') !== -1) {
          $('#querymodal').modal();
        }
        mapCanvas = new PlacingLit.Views.MapFilterView(window.SCENES);
      }
    } else {
      mapCanvas = new PlacingLit.Views.MapCanvasView;
    }
    if (!Modernizr.input.placeholder) {
      mapCanvas.handleInputAttributes();
    }
    return mapCanvas.showInfowindowFormAtLocation();
  });

}).call(this);
